{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SequencerProvider = void 0;\n\nvar url_join_1 = __importDefault(require(\"url-join\"));\n\nvar constants_1 = require(\"../constants\");\n\nvar fetchPonyfill_1 = __importDefault(require(\"../utils/fetchPonyfill\"));\n\nvar hash_1 = require(\"../utils/hash\");\n\nvar json_1 = require(\"../utils/json\");\n\nvar number_1 = require(\"../utils/number\");\n\nvar provider_1 = require(\"../utils/provider\");\n\nvar sequencer_1 = require(\"../utils/responseParser/sequencer\");\n\nvar stark_1 = require(\"../utils/stark\");\n\nvar url_1 = require(\"../utils/url\");\n\nvar errors_1 = require(\"./errors\");\n\nvar utils_1 = require(\"./utils\");\n\nfunction isEmptyQueryObject(obj) {\n  return obj === undefined || Object.keys(obj).length === 0 || Object.keys(obj).length === 1 && Object.entries(obj).every(function (_a) {\n    var _b = __read(_a, 2),\n        k = _b[0],\n        v = _b[1];\n\n    return k === 'blockIdentifier' && v === null;\n  });\n}\n\nvar SequencerProvider =\n/** @class */\nfunction () {\n  function SequencerProvider(optionsOrProvider) {\n    if (optionsOrProvider === void 0) {\n      optionsOrProvider = {\n        network: 'goerli-alpha'\n      };\n    }\n\n    var _a;\n\n    this.responseParser = new sequencer_1.SequencerAPIResponseParser();\n\n    if ('network' in optionsOrProvider) {\n      this.baseUrl = SequencerProvider.getNetworkFromName(optionsOrProvider.network);\n      this.chainId = SequencerProvider.getChainIdFromBaseUrl(this.baseUrl);\n      this.feederGatewayUrl = (0, url_join_1.default)(this.baseUrl, 'feeder_gateway');\n      this.gatewayUrl = (0, url_join_1.default)(this.baseUrl, 'gateway');\n    } else {\n      this.baseUrl = optionsOrProvider.baseUrl;\n      this.feederGatewayUrl = (0, url_1.buildUrl)(this.baseUrl, 'feeder_gateway', optionsOrProvider.feederGatewayUrl);\n      this.gatewayUrl = (0, url_1.buildUrl)(this.baseUrl, 'gateway', optionsOrProvider.gatewayUrl);\n      this.chainId = (_a = optionsOrProvider.chainId) !== null && _a !== void 0 ? _a : SequencerProvider.getChainIdFromBaseUrl(optionsOrProvider.baseUrl);\n    }\n  }\n\n  SequencerProvider.getNetworkFromName = function (name) {\n    switch (name) {\n      case 'mainnet-alpha':\n        return 'https://alpha-mainnet.starknet.io';\n\n      case 'goerli-alpha':\n      default:\n        return 'https://alpha4.starknet.io';\n    }\n  };\n\n  SequencerProvider.getChainIdFromBaseUrl = function (baseUrl) {\n    try {\n      var url = new URL(baseUrl);\n\n      if (url.host.includes('mainnet.starknet.io')) {\n        return constants_1.StarknetChainId.MAINNET;\n      }\n    } catch (_a) {\n      // eslint-disable-next-line no-console\n      console.error(\"Could not parse baseUrl: \".concat(baseUrl));\n    }\n\n    return constants_1.StarknetChainId.TESTNET;\n  };\n\n  SequencerProvider.prototype.getFetchUrl = function (endpoint) {\n    var gatewayUrlEndpoints = ['add_transaction'];\n    return gatewayUrlEndpoints.includes(endpoint) ? this.gatewayUrl : this.feederGatewayUrl;\n  };\n\n  SequencerProvider.prototype.getFetchMethod = function (endpoint) {\n    var postMethodEndpoints = ['add_transaction', 'call_contract', 'estimate_fee'];\n    return postMethodEndpoints.includes(endpoint) ? 'POST' : 'GET';\n  };\n\n  SequencerProvider.prototype.getQueryString = function (query) {\n    if (isEmptyQueryObject(query)) {\n      return '';\n    }\n\n    var queryString = Object.entries(query).map(function (_a) {\n      var _b = __read(_a, 2),\n          key = _b[0],\n          value = _b[1];\n\n      if (key === 'blockIdentifier') {\n        return \"\".concat((0, utils_1.getFormattedBlockIdentifier)(value));\n      }\n\n      return \"\".concat(key, \"=\").concat(value);\n    }).join('&');\n    return \"?\".concat(queryString);\n  };\n\n  SequencerProvider.prototype.getHeaders = function (method) {\n    if (method === 'POST') {\n      return {\n        'Content-Type': 'application/json'\n      };\n    }\n\n    return undefined;\n  }; // typesafe fetch\n\n\n  SequencerProvider.prototype.fetchEndpoint = function (endpoint) {\n    // typescript type magiuc to create a nice fitting function interface\n    var _a = []; // when both query and request are needed, we cant omit anything\n\n    for ( // typescript type magiuc to create a nice fitting function interface\n    var _i = 1 // when both query and request are needed, we cant omit anything\n    ; // typescript type magiuc to create a nice fitting function interface\n    _i < arguments.length // when both query and request are needed, we cant omit anything\n    ; // typescript type magiuc to create a nice fitting function interface\n    _i++ // when both query and request are needed, we cant omit anything\n    ) {\n      // typescript type magiuc to create a nice fitting function interface\n      _a[_i - 1] = arguments[_i]; // when both query and request are needed, we cant omit anything\n    } // typescript type magiuc to create a nice fitting function interface\n\n\n    var _b = __read(_a, 2),\n        query = _b[0],\n        request = _b[1]; // when both query and request are needed, we cant omit anything\n\n\n    return __awaiter(this, void 0, void 0, function () {\n      var baseUrl, method, queryString, headers, url, res, textResponse, responseBody, errorCode, err_1;\n      return __generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            baseUrl = this.getFetchUrl(endpoint);\n            method = this.getFetchMethod(endpoint);\n            queryString = this.getQueryString(query);\n            headers = this.getHeaders(method);\n            url = (0, url_join_1.default)(baseUrl, endpoint, queryString);\n            _c.label = 1;\n\n          case 1:\n            _c.trys.push([1, 4,, 5]);\n\n            return [4\n            /*yield*/\n            , (0, fetchPonyfill_1.default)(url, {\n              method: method,\n              body: (0, json_1.stringify)(request),\n              headers: headers\n            })];\n\n          case 2:\n            res = _c.sent();\n            return [4\n            /*yield*/\n            , res.text()];\n\n          case 3:\n            textResponse = _c.sent();\n\n            if (!res.ok) {\n              responseBody = void 0;\n\n              try {\n                responseBody = (0, json_1.parse)(textResponse);\n              } catch (_d) {\n                // if error parsing fails, return an http error\n                throw new errors_1.HttpError(res.statusText, res.status);\n              }\n\n              errorCode = responseBody.code || (responseBody === null || responseBody === void 0 ? void 0 : responseBody.status_code);\n              throw new errors_1.GatewayError(responseBody.message, errorCode); // Caught locally, and re-thrown for the user\n            }\n\n            if (endpoint === 'estimate_fee') {\n              return [2\n              /*return*/\n              , (0, json_1.parseAlwaysAsBig)(textResponse, function (_, v) {\n                if (v && typeof v === 'bigint') {\n                  return (0, number_1.toBN)(v.toString());\n                }\n\n                return v;\n              })];\n            }\n\n            return [2\n            /*return*/\n            , (0, json_1.parse)(textResponse)];\n\n          case 4:\n            err_1 = _c.sent(); // rethrow custom errors\n\n            if (err_1 instanceof errors_1.GatewayError || err_1 instanceof errors_1.HttpError) {\n              throw err_1;\n            }\n\n            if (err_1 instanceof Error) {\n              throw Error(\"Could not \".concat(method, \" from endpoint `\").concat(url, \"`: \").concat(err_1.message));\n            }\n\n            throw err_1;\n\n          case 5:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  SequencerProvider.prototype.callContract = function (_a, blockIdentifier) {\n    var contractAddress = _a.contractAddress,\n        entryPointSelector = _a.entrypoint,\n        _b = _a.calldata,\n        calldata = _b === void 0 ? [] : _b;\n\n    if (blockIdentifier === void 0) {\n      blockIdentifier = 'pending';\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_c) {\n        return [2\n        /*return*/\n        , this.fetchEndpoint('call_contract', {\n          blockIdentifier: blockIdentifier\n        }, {\n          signature: [],\n          contract_address: contractAddress,\n          entry_point_selector: (0, hash_1.getSelectorFromName)(entryPointSelector),\n          calldata: calldata\n        }).then(this.responseParser.parseCallContractResponse)];\n      });\n    });\n  };\n\n  SequencerProvider.prototype.getBlock = function (blockIdentifier) {\n    if (blockIdentifier === void 0) {\n      blockIdentifier = 'pending';\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2\n        /*return*/\n        , this.fetchEndpoint('get_block', {\n          blockIdentifier: blockIdentifier\n        }).then(this.responseParser.parseGetBlockResponse)];\n      });\n    });\n  };\n\n  SequencerProvider.prototype.getStorageAt = function (contractAddress, key, blockHashOrTag) {\n    if (blockHashOrTag === void 0) {\n      blockHashOrTag = 'pending';\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      var parsedKey;\n      return __generator(this, function (_a) {\n        parsedKey = (0, number_1.toBN)(key).toString(10);\n        return [2\n        /*return*/\n        , this.fetchEndpoint('get_storage_at', {\n          blockIdentifier: blockHashOrTag,\n          contractAddress: contractAddress,\n          key: parsedKey\n        })];\n      });\n    });\n  };\n\n  SequencerProvider.prototype.getTransaction = function (txHash) {\n    return __awaiter(this, void 0, void 0, function () {\n      var txHashHex;\n\n      var _this = this;\n\n      return __generator(this, function (_a) {\n        txHashHex = (0, number_1.toHex)((0, number_1.toBN)(txHash));\n        return [2\n        /*return*/\n        , this.fetchEndpoint('get_transaction', {\n          transactionHash: txHashHex\n        }).then(function (value) {\n          return _this.responseParser.parseGetTransactionResponse(value);\n        })];\n      });\n    });\n  };\n\n  SequencerProvider.prototype.getTransactionReceipt = function (txHash) {\n    return __awaiter(this, void 0, void 0, function () {\n      var txHashHex;\n      return __generator(this, function (_a) {\n        txHashHex = (0, number_1.toHex)((0, number_1.toBN)(txHash));\n        return [2\n        /*return*/\n        , this.fetchEndpoint('get_transaction_receipt', {\n          transactionHash: txHashHex\n        }).then(this.responseParser.parseGetTransactionReceiptResponse)];\n      });\n    });\n  };\n\n  SequencerProvider.prototype.getClassAt = function (contractAddress, blockIdentifier) {\n    if (blockIdentifier === void 0) {\n      blockIdentifier = 'pending';\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2\n        /*return*/\n        , this.fetchEndpoint('get_full_contract', {\n          blockIdentifier: blockIdentifier,\n          contractAddress: contractAddress\n        }).then(provider_1.parseContract)];\n      });\n    });\n  };\n\n  SequencerProvider.prototype.invokeFunction = function (functionInvocation, details) {\n    var _a, _b;\n\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_c) {\n        return [2\n        /*return*/\n        , this.fetchEndpoint('add_transaction', undefined, {\n          type: 'INVOKE_FUNCTION',\n          contract_address: functionInvocation.contractAddress,\n          entry_point_selector: (0, hash_1.getSelectorFromName)(functionInvocation.entrypoint),\n          calldata: (0, number_1.bigNumberishArrayToDecimalStringArray)((_a = functionInvocation.calldata) !== null && _a !== void 0 ? _a : []),\n          signature: (0, number_1.bigNumberishArrayToDecimalStringArray)((_b = functionInvocation.signature) !== null && _b !== void 0 ? _b : []),\n          max_fee: (0, number_1.toHex)((0, number_1.toBN)(details.maxFee || 0)),\n          version: (0, number_1.toHex)((0, number_1.toBN)(details.version || 0))\n        }).then(this.responseParser.parseInvokeFunctionResponse)];\n      });\n    });\n  };\n\n  SequencerProvider.prototype.deployContract = function (_a) {\n    var contract = _a.contract,\n        constructorCalldata = _a.constructorCalldata,\n        addressSalt = _a.addressSalt;\n    return __awaiter(this, void 0, void 0, function () {\n      var contractDefinition;\n      return __generator(this, function (_b) {\n        contractDefinition = (0, provider_1.parseContract)(contract);\n        return [2\n        /*return*/\n        , this.fetchEndpoint('add_transaction', undefined, {\n          type: 'DEPLOY',\n          contract_address_salt: addressSalt !== null && addressSalt !== void 0 ? addressSalt : (0, stark_1.randomAddress)(),\n          constructor_calldata: (0, number_1.bigNumberishArrayToDecimalStringArray)(constructorCalldata !== null && constructorCalldata !== void 0 ? constructorCalldata : []),\n          contract_definition: contractDefinition\n        }).then(this.responseParser.parseDeployContractResponse)];\n      });\n    });\n  };\n\n  SequencerProvider.prototype.declareContract = function (_a) {\n    var contract = _a.contract;\n    return __awaiter(this, void 0, void 0, function () {\n      var contractDefinition;\n      return __generator(this, function (_b) {\n        contractDefinition = (0, provider_1.parseContract)(contract);\n        return [2\n        /*return*/\n        , this.fetchEndpoint('add_transaction', undefined, {\n          type: 'DECLARE',\n          contract_class: contractDefinition,\n          nonce: (0, number_1.toHex)(constants_1.ZERO),\n          signature: [],\n          sender_address: (0, number_1.toHex)(constants_1.ONE)\n        }).then(this.responseParser.parseDeclareContractResponse)];\n      });\n    });\n  };\n\n  SequencerProvider.prototype.getEstimateFee = function (invocation, blockIdentifier, invocationDetails) {\n    var _a;\n\n    if (blockIdentifier === void 0) {\n      blockIdentifier = 'pending';\n    }\n\n    if (invocationDetails === void 0) {\n      invocationDetails = {};\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_b) {\n        return [2\n        /*return*/\n        , this.fetchEndpoint('estimate_fee', {\n          blockIdentifier: blockIdentifier\n        }, {\n          contract_address: invocation.contractAddress,\n          entry_point_selector: (0, hash_1.getSelectorFromName)(invocation.entrypoint),\n          calldata: (_a = invocation.calldata) !== null && _a !== void 0 ? _a : [],\n          signature: (0, number_1.bigNumberishArrayToDecimalStringArray)(invocation.signature || []),\n          version: (0, number_1.toHex)((0, number_1.toBN)((invocationDetails === null || invocationDetails === void 0 ? void 0 : invocationDetails.version) || 0))\n        }).then(this.responseParser.parseFeeEstimateResponse)];\n      });\n    });\n  };\n\n  SequencerProvider.prototype.getCode = function (contractAddress, blockIdentifier) {\n    if (blockIdentifier === void 0) {\n      blockIdentifier = 'pending';\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2\n        /*return*/\n        , this.fetchEndpoint('get_code', {\n          contractAddress: contractAddress,\n          blockIdentifier: blockIdentifier\n        }).then(this.responseParser.parseGetCodeResponse)];\n      });\n    });\n  };\n\n  SequencerProvider.prototype.waitForTransaction = function (txHash, retryInterval) {\n    if (retryInterval === void 0) {\n      retryInterval = 8000;\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      var onchain, res, successStates, errorStates, message, error;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            onchain = false;\n            _a.label = 1;\n\n          case 1:\n            if (!!onchain) return [3\n            /*break*/\n            , 4]; // eslint-disable-next-line no-await-in-loop\n\n            return [4\n            /*yield*/\n            , (0, provider_1.wait)(retryInterval)];\n\n          case 2:\n            // eslint-disable-next-line no-await-in-loop\n            _a.sent();\n\n            return [4\n            /*yield*/\n            , this.getTransactionStatus(txHash)];\n\n          case 3:\n            res = _a.sent();\n            successStates = ['ACCEPTED_ON_L1', 'ACCEPTED_ON_L2', 'PENDING'];\n            errorStates = ['REJECTED', 'NOT_RECEIVED'];\n\n            if (successStates.includes(res.tx_status)) {\n              onchain = true;\n            } else if (errorStates.includes(res.tx_status)) {\n              message = res.tx_failure_reason ? \"\".concat(res.tx_status, \": \").concat(res.tx_failure_reason.code, \"\\n\").concat(res.tx_failure_reason.error_message) : res.tx_status;\n              error = new Error(message);\n              error.response = res;\n              throw error;\n            }\n\n            return [3\n            /*break*/\n            , 1];\n\n          case 4:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n  /**\n   * Gets the status of a transaction.\n   *\n   * [Reference](https://github.com/starkware-libs/cairo-lang/blob/f464ec4797361b6be8989e36e02ec690e74ef285/src/starkware/starknet/services/api/feeder_gateway/feeder_gateway_client.py#L48-L52)\n   *\n   * @param txHash\n   * @returns the transaction status object { block_number, tx_status: NOT_RECEIVED | RECEIVED | PENDING | REJECTED | ACCEPTED_ONCHAIN }\n   */\n\n\n  SequencerProvider.prototype.getTransactionStatus = function (txHash) {\n    return __awaiter(this, void 0, void 0, function () {\n      var txHashHex;\n      return __generator(this, function (_a) {\n        txHashHex = (0, number_1.toHex)((0, number_1.toBN)(txHash));\n        return [2\n        /*return*/\n        , this.fetchEndpoint('get_transaction_status', {\n          transactionHash: txHashHex\n        })];\n      });\n    });\n  };\n  /**\n   * Gets the smart contract address on the goerli testnet.\n   *\n   * [Reference](https://github.com/starkware-libs/cairo-lang/blob/f464ec4797361b6be8989e36e02ec690e74ef285/src/starkware/starknet/services/api/feeder_gateway/feeder_gateway_client.py#L13-L15)\n   * @returns starknet smart contract addresses\n   */\n\n\n  SequencerProvider.prototype.getContractAddresses = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2\n        /*return*/\n        , this.fetchEndpoint('get_contract_addresses')];\n      });\n    });\n  };\n  /**\n   * Gets the transaction trace from a tx id.\n   *\n   *\n   * @param txHash\n   * @returns the transaction trace\n   */\n\n\n  SequencerProvider.prototype.getTransactionTrace = function (txHash) {\n    return __awaiter(this, void 0, void 0, function () {\n      var txHashHex;\n      return __generator(this, function (_a) {\n        txHashHex = (0, number_1.toHex)((0, number_1.toBN)(txHash));\n        return [2\n        /*return*/\n        , this.fetchEndpoint('get_transaction_trace', {\n          transactionHash: txHashHex\n        })];\n      });\n    });\n  };\n\n  return SequencerProvider;\n}();\n\nexports.SequencerProvider = SequencerProvider;","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","__read","o","m","i","r","ar","error","__importDefault","mod","__esModule","Object","defineProperty","exports","SequencerProvider","url_join_1","require","constants_1","fetchPonyfill_1","hash_1","json_1","number_1","provider_1","sequencer_1","stark_1","url_1","errors_1","utils_1","isEmptyQueryObject","obj","undefined","keys","entries","every","_a","_b","k","optionsOrProvider","network","responseParser","SequencerAPIResponseParser","baseUrl","getNetworkFromName","chainId","getChainIdFromBaseUrl","feederGatewayUrl","default","gatewayUrl","buildUrl","name","url","URL","host","includes","StarknetChainId","MAINNET","console","concat","TESTNET","prototype","getFetchUrl","endpoint","gatewayUrlEndpoints","getFetchMethod","postMethodEndpoints","getQueryString","query","queryString","map","key","getFormattedBlockIdentifier","join","getHeaders","method","fetchEndpoint","_i","arguments","request","headers","res","textResponse","responseBody","errorCode","err_1","_c","stringify","text","ok","parse","_d","HttpError","statusText","status","code","status_code","GatewayError","message","parseAlwaysAsBig","toBN","toString","Error","callContract","blockIdentifier","contractAddress","entryPointSelector","entrypoint","calldata","signature","contract_address","entry_point_selector","getSelectorFromName","parseCallContractResponse","getBlock","parseGetBlockResponse","getStorageAt","blockHashOrTag","parsedKey","getTransaction","txHash","txHashHex","_this","toHex","transactionHash","parseGetTransactionResponse","getTransactionReceipt","parseGetTransactionReceiptResponse","getClassAt","parseContract","invokeFunction","functionInvocation","details","type","bigNumberishArrayToDecimalStringArray","max_fee","maxFee","version","parseInvokeFunctionResponse","deployContract","contract","constructorCalldata","addressSalt","contractDefinition","contract_address_salt","randomAddress","constructor_calldata","contract_definition","parseDeployContractResponse","declareContract","contract_class","nonce","ZERO","sender_address","ONE","parseDeclareContractResponse","getEstimateFee","invocation","invocationDetails","parseFeeEstimateResponse","getCode","parseGetCodeResponse","waitForTransaction","retryInterval","onchain","successStates","errorStates","wait","getTransactionStatus","tx_status","tx_failure_reason","error_message","response","getContractAddresses","getTransactionTrace"],"sources":["/Users/rmzlb/Dropbox/Mac (2)/Documents/GitHub/8mvmt-react/node_modules/starknet/dist/provider/sequencer.js"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SequencerProvider = void 0;\nvar url_join_1 = __importDefault(require(\"url-join\"));\nvar constants_1 = require(\"../constants\");\nvar fetchPonyfill_1 = __importDefault(require(\"../utils/fetchPonyfill\"));\nvar hash_1 = require(\"../utils/hash\");\nvar json_1 = require(\"../utils/json\");\nvar number_1 = require(\"../utils/number\");\nvar provider_1 = require(\"../utils/provider\");\nvar sequencer_1 = require(\"../utils/responseParser/sequencer\");\nvar stark_1 = require(\"../utils/stark\");\nvar url_1 = require(\"../utils/url\");\nvar errors_1 = require(\"./errors\");\nvar utils_1 = require(\"./utils\");\nfunction isEmptyQueryObject(obj) {\n    return (obj === undefined ||\n        Object.keys(obj).length === 0 ||\n        (Object.keys(obj).length === 1 &&\n            Object.entries(obj).every(function (_a) {\n                var _b = __read(_a, 2), k = _b[0], v = _b[1];\n                return k === 'blockIdentifier' && v === null;\n            })));\n}\nvar SequencerProvider = /** @class */ (function () {\n    function SequencerProvider(optionsOrProvider) {\n        if (optionsOrProvider === void 0) { optionsOrProvider = { network: 'goerli-alpha' }; }\n        var _a;\n        this.responseParser = new sequencer_1.SequencerAPIResponseParser();\n        if ('network' in optionsOrProvider) {\n            this.baseUrl = SequencerProvider.getNetworkFromName(optionsOrProvider.network);\n            this.chainId = SequencerProvider.getChainIdFromBaseUrl(this.baseUrl);\n            this.feederGatewayUrl = (0, url_join_1.default)(this.baseUrl, 'feeder_gateway');\n            this.gatewayUrl = (0, url_join_1.default)(this.baseUrl, 'gateway');\n        }\n        else {\n            this.baseUrl = optionsOrProvider.baseUrl;\n            this.feederGatewayUrl = (0, url_1.buildUrl)(this.baseUrl, 'feeder_gateway', optionsOrProvider.feederGatewayUrl);\n            this.gatewayUrl = (0, url_1.buildUrl)(this.baseUrl, 'gateway', optionsOrProvider.gatewayUrl);\n            this.chainId =\n                (_a = optionsOrProvider.chainId) !== null && _a !== void 0 ? _a : SequencerProvider.getChainIdFromBaseUrl(optionsOrProvider.baseUrl);\n        }\n    }\n    SequencerProvider.getNetworkFromName = function (name) {\n        switch (name) {\n            case 'mainnet-alpha':\n                return 'https://alpha-mainnet.starknet.io';\n            case 'goerli-alpha':\n            default:\n                return 'https://alpha4.starknet.io';\n        }\n    };\n    SequencerProvider.getChainIdFromBaseUrl = function (baseUrl) {\n        try {\n            var url = new URL(baseUrl);\n            if (url.host.includes('mainnet.starknet.io')) {\n                return constants_1.StarknetChainId.MAINNET;\n            }\n        }\n        catch (_a) {\n            // eslint-disable-next-line no-console\n            console.error(\"Could not parse baseUrl: \".concat(baseUrl));\n        }\n        return constants_1.StarknetChainId.TESTNET;\n    };\n    SequencerProvider.prototype.getFetchUrl = function (endpoint) {\n        var gatewayUrlEndpoints = ['add_transaction'];\n        return gatewayUrlEndpoints.includes(endpoint) ? this.gatewayUrl : this.feederGatewayUrl;\n    };\n    SequencerProvider.prototype.getFetchMethod = function (endpoint) {\n        var postMethodEndpoints = ['add_transaction', 'call_contract', 'estimate_fee'];\n        return postMethodEndpoints.includes(endpoint) ? 'POST' : 'GET';\n    };\n    SequencerProvider.prototype.getQueryString = function (query) {\n        if (isEmptyQueryObject(query)) {\n            return '';\n        }\n        var queryString = Object.entries(query)\n            .map(function (_a) {\n            var _b = __read(_a, 2), key = _b[0], value = _b[1];\n            if (key === 'blockIdentifier') {\n                return \"\".concat((0, utils_1.getFormattedBlockIdentifier)(value));\n            }\n            return \"\".concat(key, \"=\").concat(value);\n        })\n            .join('&');\n        return \"?\".concat(queryString);\n    };\n    SequencerProvider.prototype.getHeaders = function (method) {\n        if (method === 'POST') {\n            return {\n                'Content-Type': 'application/json',\n            };\n        }\n        return undefined;\n    };\n    // typesafe fetch\n    SequencerProvider.prototype.fetchEndpoint = function (endpoint) {\n        // typescript type magiuc to create a nice fitting function interface\n        var _a = []; // when both query and request are needed, we cant omit anything\n        for (\n        // typescript type magiuc to create a nice fitting function interface\n        var _i = 1 // when both query and request are needed, we cant omit anything\n        ; \n        // typescript type magiuc to create a nice fitting function interface\n        _i < arguments.length // when both query and request are needed, we cant omit anything\n        ; \n        // typescript type magiuc to create a nice fitting function interface\n        _i++ // when both query and request are needed, we cant omit anything\n        ) {\n            // typescript type magiuc to create a nice fitting function interface\n            _a[_i - 1] = arguments[_i]; // when both query and request are needed, we cant omit anything\n        }\n        // typescript type magiuc to create a nice fitting function interface\n        var _b = __read(_a, 2), query = _b[0], request = _b[1]; // when both query and request are needed, we cant omit anything\n        return __awaiter(this, void 0, void 0, function () {\n            var baseUrl, method, queryString, headers, url, res, textResponse, responseBody, errorCode, err_1;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        baseUrl = this.getFetchUrl(endpoint);\n                        method = this.getFetchMethod(endpoint);\n                        queryString = this.getQueryString(query);\n                        headers = this.getHeaders(method);\n                        url = (0, url_join_1.default)(baseUrl, endpoint, queryString);\n                        _c.label = 1;\n                    case 1:\n                        _c.trys.push([1, 4, , 5]);\n                        return [4 /*yield*/, (0, fetchPonyfill_1.default)(url, {\n                                method: method,\n                                body: (0, json_1.stringify)(request),\n                                headers: headers,\n                            })];\n                    case 2:\n                        res = _c.sent();\n                        return [4 /*yield*/, res.text()];\n                    case 3:\n                        textResponse = _c.sent();\n                        if (!res.ok) {\n                            responseBody = void 0;\n                            try {\n                                responseBody = (0, json_1.parse)(textResponse);\n                            }\n                            catch (_d) {\n                                // if error parsing fails, return an http error\n                                throw new errors_1.HttpError(res.statusText, res.status);\n                            }\n                            errorCode = responseBody.code || (responseBody === null || responseBody === void 0 ? void 0 : responseBody.status_code);\n                            throw new errors_1.GatewayError(responseBody.message, errorCode); // Caught locally, and re-thrown for the user\n                        }\n                        if (endpoint === 'estimate_fee') {\n                            return [2 /*return*/, (0, json_1.parseAlwaysAsBig)(textResponse, function (_, v) {\n                                    if (v && typeof v === 'bigint') {\n                                        return (0, number_1.toBN)(v.toString());\n                                    }\n                                    return v;\n                                })];\n                        }\n                        return [2 /*return*/, (0, json_1.parse)(textResponse)];\n                    case 4:\n                        err_1 = _c.sent();\n                        // rethrow custom errors\n                        if (err_1 instanceof errors_1.GatewayError || err_1 instanceof errors_1.HttpError) {\n                            throw err_1;\n                        }\n                        if (err_1 instanceof Error) {\n                            throw Error(\"Could not \".concat(method, \" from endpoint `\").concat(url, \"`: \").concat(err_1.message));\n                        }\n                        throw err_1;\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SequencerProvider.prototype.callContract = function (_a, blockIdentifier) {\n        var contractAddress = _a.contractAddress, entryPointSelector = _a.entrypoint, _b = _a.calldata, calldata = _b === void 0 ? [] : _b;\n        if (blockIdentifier === void 0) { blockIdentifier = 'pending'; }\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_c) {\n                return [2 /*return*/, this.fetchEndpoint('call_contract', { blockIdentifier: blockIdentifier }, {\n                        signature: [],\n                        contract_address: contractAddress,\n                        entry_point_selector: (0, hash_1.getSelectorFromName)(entryPointSelector),\n                        calldata: calldata,\n                    }).then(this.responseParser.parseCallContractResponse)];\n            });\n        });\n    };\n    SequencerProvider.prototype.getBlock = function (blockIdentifier) {\n        if (blockIdentifier === void 0) { blockIdentifier = 'pending'; }\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.fetchEndpoint('get_block', { blockIdentifier: blockIdentifier }).then(this.responseParser.parseGetBlockResponse)];\n            });\n        });\n    };\n    SequencerProvider.prototype.getStorageAt = function (contractAddress, key, blockHashOrTag) {\n        if (blockHashOrTag === void 0) { blockHashOrTag = 'pending'; }\n        return __awaiter(this, void 0, void 0, function () {\n            var parsedKey;\n            return __generator(this, function (_a) {\n                parsedKey = (0, number_1.toBN)(key).toString(10);\n                return [2 /*return*/, this.fetchEndpoint('get_storage_at', {\n                        blockIdentifier: blockHashOrTag,\n                        contractAddress: contractAddress,\n                        key: parsedKey,\n                    })];\n            });\n        });\n    };\n    SequencerProvider.prototype.getTransaction = function (txHash) {\n        return __awaiter(this, void 0, void 0, function () {\n            var txHashHex;\n            var _this = this;\n            return __generator(this, function (_a) {\n                txHashHex = (0, number_1.toHex)((0, number_1.toBN)(txHash));\n                return [2 /*return*/, this.fetchEndpoint('get_transaction', { transactionHash: txHashHex }).then(function (value) {\n                        return _this.responseParser.parseGetTransactionResponse(value);\n                    })];\n            });\n        });\n    };\n    SequencerProvider.prototype.getTransactionReceipt = function (txHash) {\n        return __awaiter(this, void 0, void 0, function () {\n            var txHashHex;\n            return __generator(this, function (_a) {\n                txHashHex = (0, number_1.toHex)((0, number_1.toBN)(txHash));\n                return [2 /*return*/, this.fetchEndpoint('get_transaction_receipt', { transactionHash: txHashHex }).then(this.responseParser.parseGetTransactionReceiptResponse)];\n            });\n        });\n    };\n    SequencerProvider.prototype.getClassAt = function (contractAddress, blockIdentifier) {\n        if (blockIdentifier === void 0) { blockIdentifier = 'pending'; }\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.fetchEndpoint('get_full_contract', { blockIdentifier: blockIdentifier, contractAddress: contractAddress }).then(provider_1.parseContract)];\n            });\n        });\n    };\n    SequencerProvider.prototype.invokeFunction = function (functionInvocation, details) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_c) {\n                return [2 /*return*/, this.fetchEndpoint('add_transaction', undefined, {\n                        type: 'INVOKE_FUNCTION',\n                        contract_address: functionInvocation.contractAddress,\n                        entry_point_selector: (0, hash_1.getSelectorFromName)(functionInvocation.entrypoint),\n                        calldata: (0, number_1.bigNumberishArrayToDecimalStringArray)((_a = functionInvocation.calldata) !== null && _a !== void 0 ? _a : []),\n                        signature: (0, number_1.bigNumberishArrayToDecimalStringArray)((_b = functionInvocation.signature) !== null && _b !== void 0 ? _b : []),\n                        max_fee: (0, number_1.toHex)((0, number_1.toBN)(details.maxFee || 0)),\n                        version: (0, number_1.toHex)((0, number_1.toBN)(details.version || 0)),\n                    }).then(this.responseParser.parseInvokeFunctionResponse)];\n            });\n        });\n    };\n    SequencerProvider.prototype.deployContract = function (_a) {\n        var contract = _a.contract, constructorCalldata = _a.constructorCalldata, addressSalt = _a.addressSalt;\n        return __awaiter(this, void 0, void 0, function () {\n            var contractDefinition;\n            return __generator(this, function (_b) {\n                contractDefinition = (0, provider_1.parseContract)(contract);\n                return [2 /*return*/, this.fetchEndpoint('add_transaction', undefined, {\n                        type: 'DEPLOY',\n                        contract_address_salt: addressSalt !== null && addressSalt !== void 0 ? addressSalt : (0, stark_1.randomAddress)(),\n                        constructor_calldata: (0, number_1.bigNumberishArrayToDecimalStringArray)(constructorCalldata !== null && constructorCalldata !== void 0 ? constructorCalldata : []),\n                        contract_definition: contractDefinition,\n                    }).then(this.responseParser.parseDeployContractResponse)];\n            });\n        });\n    };\n    SequencerProvider.prototype.declareContract = function (_a) {\n        var contract = _a.contract;\n        return __awaiter(this, void 0, void 0, function () {\n            var contractDefinition;\n            return __generator(this, function (_b) {\n                contractDefinition = (0, provider_1.parseContract)(contract);\n                return [2 /*return*/, this.fetchEndpoint('add_transaction', undefined, {\n                        type: 'DECLARE',\n                        contract_class: contractDefinition,\n                        nonce: (0, number_1.toHex)(constants_1.ZERO),\n                        signature: [],\n                        sender_address: (0, number_1.toHex)(constants_1.ONE),\n                    }).then(this.responseParser.parseDeclareContractResponse)];\n            });\n        });\n    };\n    SequencerProvider.prototype.getEstimateFee = function (invocation, blockIdentifier, invocationDetails) {\n        var _a;\n        if (blockIdentifier === void 0) { blockIdentifier = 'pending'; }\n        if (invocationDetails === void 0) { invocationDetails = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_b) {\n                return [2 /*return*/, this.fetchEndpoint('estimate_fee', { blockIdentifier: blockIdentifier }, {\n                        contract_address: invocation.contractAddress,\n                        entry_point_selector: (0, hash_1.getSelectorFromName)(invocation.entrypoint),\n                        calldata: (_a = invocation.calldata) !== null && _a !== void 0 ? _a : [],\n                        signature: (0, number_1.bigNumberishArrayToDecimalStringArray)(invocation.signature || []),\n                        version: (0, number_1.toHex)((0, number_1.toBN)((invocationDetails === null || invocationDetails === void 0 ? void 0 : invocationDetails.version) || 0)),\n                    }).then(this.responseParser.parseFeeEstimateResponse)];\n            });\n        });\n    };\n    SequencerProvider.prototype.getCode = function (contractAddress, blockIdentifier) {\n        if (blockIdentifier === void 0) { blockIdentifier = 'pending'; }\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.fetchEndpoint('get_code', { contractAddress: contractAddress, blockIdentifier: blockIdentifier }).then(this.responseParser.parseGetCodeResponse)];\n            });\n        });\n    };\n    SequencerProvider.prototype.waitForTransaction = function (txHash, retryInterval) {\n        if (retryInterval === void 0) { retryInterval = 8000; }\n        return __awaiter(this, void 0, void 0, function () {\n            var onchain, res, successStates, errorStates, message, error;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        onchain = false;\n                        _a.label = 1;\n                    case 1:\n                        if (!!onchain) return [3 /*break*/, 4];\n                        // eslint-disable-next-line no-await-in-loop\n                        return [4 /*yield*/, (0, provider_1.wait)(retryInterval)];\n                    case 2:\n                        // eslint-disable-next-line no-await-in-loop\n                        _a.sent();\n                        return [4 /*yield*/, this.getTransactionStatus(txHash)];\n                    case 3:\n                        res = _a.sent();\n                        successStates = ['ACCEPTED_ON_L1', 'ACCEPTED_ON_L2', 'PENDING'];\n                        errorStates = ['REJECTED', 'NOT_RECEIVED'];\n                        if (successStates.includes(res.tx_status)) {\n                            onchain = true;\n                        }\n                        else if (errorStates.includes(res.tx_status)) {\n                            message = res.tx_failure_reason\n                                ? \"\".concat(res.tx_status, \": \").concat(res.tx_failure_reason.code, \"\\n\").concat(res.tx_failure_reason.error_message)\n                                : res.tx_status;\n                            error = new Error(message);\n                            error.response = res;\n                            throw error;\n                        }\n                        return [3 /*break*/, 1];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Gets the status of a transaction.\n     *\n     * [Reference](https://github.com/starkware-libs/cairo-lang/blob/f464ec4797361b6be8989e36e02ec690e74ef285/src/starkware/starknet/services/api/feeder_gateway/feeder_gateway_client.py#L48-L52)\n     *\n     * @param txHash\n     * @returns the transaction status object { block_number, tx_status: NOT_RECEIVED | RECEIVED | PENDING | REJECTED | ACCEPTED_ONCHAIN }\n     */\n    SequencerProvider.prototype.getTransactionStatus = function (txHash) {\n        return __awaiter(this, void 0, void 0, function () {\n            var txHashHex;\n            return __generator(this, function (_a) {\n                txHashHex = (0, number_1.toHex)((0, number_1.toBN)(txHash));\n                return [2 /*return*/, this.fetchEndpoint('get_transaction_status', { transactionHash: txHashHex })];\n            });\n        });\n    };\n    /**\n     * Gets the smart contract address on the goerli testnet.\n     *\n     * [Reference](https://github.com/starkware-libs/cairo-lang/blob/f464ec4797361b6be8989e36e02ec690e74ef285/src/starkware/starknet/services/api/feeder_gateway/feeder_gateway_client.py#L13-L15)\n     * @returns starknet smart contract addresses\n     */\n    SequencerProvider.prototype.getContractAddresses = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.fetchEndpoint('get_contract_addresses')];\n            });\n        });\n    };\n    /**\n     * Gets the transaction trace from a tx id.\n     *\n     *\n     * @param txHash\n     * @returns the transaction trace\n     */\n    SequencerProvider.prototype.getTransactionTrace = function (txHash) {\n        return __awaiter(this, void 0, void 0, function () {\n            var txHashHex;\n            return __generator(this, function (_a) {\n                txHashHex = (0, number_1.toHex)((0, number_1.toBN)(txHash));\n                return [2 /*return*/, this.fetchEndpoint('get_transaction_trace', { transactionHash: txHashHex })];\n            });\n        });\n    };\n    return SequencerProvider;\n}());\nexports.SequencerProvider = SequencerProvider;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}