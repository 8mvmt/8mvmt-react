{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/rmzlb/Dropbox/Mac (2)/Documents/GitHub/8mvmt-react/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\n\nvar _asyncToGenerator = require(\"/Users/rmzlb/Dropbox/Mac (2)/Documents/GitHub/8mvmt-react/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\n\nvar _slicedToArray = require(\"/Users/rmzlb/Dropbox/Mac (2)/Documents/GitHub/8mvmt-react/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\n\nvar _objectSpread = require(\"/Users/rmzlb/Dropbox/Mac (2)/Documents/GitHub/8mvmt-react/node_modules/@babel/runtime/helpers/objectSpread2.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useStarknetInvoke = void 0;\n\nvar react_1 = require(\"react\");\n\nvar __1 = require(\"..\");\n\nfunction starknetInvokeReducer(state, action) {\n  if (action.type === 'start_invoke') {\n    return _objectSpread(_objectSpread({}, state), {}, {\n      loading: true\n    });\n  } else if (action.type === 'set_invoke_response') {\n    return _objectSpread(_objectSpread({}, state), {}, {\n      data: action.data.transaction_hash,\n      error: undefined,\n      loading: false\n    });\n  } else if (action.type === 'set_invoke_error') {\n    return _objectSpread(_objectSpread({}, state), {}, {\n      error: action.error,\n      loading: false\n    });\n  } else if (action.type === 'reset') {\n    return _objectSpread(_objectSpread({}, state), {}, {\n      data: undefined,\n      error: undefined,\n      loading: false\n    });\n  }\n\n  return state;\n}\n\nfunction useStarknetInvoke(_ref) {\n  var contract = _ref.contract,\n      method = _ref.method;\n\n  var _ref2 = (0, __1.useStarknetTransactionManager)(),\n      addTransaction = _ref2.addTransaction;\n\n  var _ref3 = (0, react_1.useReducer)(starknetInvokeReducer, {\n    loading: false\n  }),\n      _ref4 = _slicedToArray(_ref3, 2),\n      state = _ref4[0],\n      dispatch = _ref4[1];\n\n  var reset = (0, react_1.useCallback)(function () {\n    dispatch({\n      type: 'reset'\n    });\n  }, [dispatch]);\n  var invoke = (0, react_1.useCallback)( /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref5) {\n      var args, overrides, metadata, response, message;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              args = _ref5.args, overrides = _ref5.overrides, metadata = _ref5.metadata;\n\n              if (!(contract && method && args)) {\n                _context.next = 15;\n                break;\n              }\n\n              _context.prev = 2;\n              dispatch({\n                type: 'start_invoke'\n              });\n              _context.next = 6;\n              return contract.invoke(method, args, overrides);\n\n            case 6:\n              response = _context.sent;\n              dispatch({\n                type: 'set_invoke_response',\n                data: response\n              }); // start tracking the transaction\n\n              addTransaction({\n                status: response.code,\n                transactionHash: response.transaction_hash,\n                metadata: metadata\n              });\n              _context.next = 15;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](2);\n              message = _context.t0 instanceof Error ? _context.t0.message : String(_context.t0);\n              dispatch({\n                type: 'set_invoke_error',\n                error: message\n              });\n\n            case 15:\n              return _context.abrupt(\"return\", undefined);\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 11]]);\n    }));\n\n    return function (_x) {\n      return _ref6.apply(this, arguments);\n    };\n  }(), [contract, method, addTransaction]);\n  return {\n    data: state.data,\n    loading: state.loading,\n    error: state.error,\n    reset: reset,\n    invoke: invoke\n  };\n}\n\nexports.useStarknetInvoke = useStarknetInvoke;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;AAAA;;AAEA;;AA4BA,SAASA,qBAAT,CAA+BC,KAA/B,EAA6CC,MAA7C,EAA2D;EACzD,IAAIA,MAAM,CAACC,IAAP,KAAgB,cAApB,EAAoC;IAClC,uCACKF,KADL;MAEEG,OAAO,EAAE;IAFX;EAID,CALD,MAKO,IAAIF,MAAM,CAACC,IAAP,KAAgB,qBAApB,EAA2C;IAChD,uCACKF,KADL;MAEEI,IAAI,EAAEH,MAAM,CAACG,IAAP,CAAYC,gBAFpB;MAGEC,KAAK,EAAEC,SAHT;MAIEJ,OAAO,EAAE;IAJX;EAMD,CAPM,MAOA,IAAIF,MAAM,CAACC,IAAP,KAAgB,kBAApB,EAAwC;IAC7C,uCACKF,KADL;MAEEM,KAAK,EAAEL,MAAM,CAACK,KAFhB;MAGEH,OAAO,EAAE;IAHX;EAKD,CANM,MAMA,IAAIF,MAAM,CAACC,IAAP,KAAgB,OAApB,EAA6B;IAClC,uCACKF,KADL;MAEEI,IAAI,EAAEG,SAFR;MAGED,KAAK,EAAEC,SAHT;MAIEJ,OAAO,EAAE;IAJX;EAMD;;EACD,OAAOH,KAAP;AACD;;AAsBD,SAAgBQ,iBAAhB,OAGwB;EAAA,IAFtBC,QAEsB,QAFtBA,QAEsB;EAAA,IADtBC,MACsB,QADtBA,MACsB;;EACtB,YAA2B,wCAA3B;EAAA,IAAQC,cAAR,SAAQA,cAAR;;EACA,YAA0B,wBAAWZ,qBAAX,EAAkC;IAC1DI,OAAO,EAAE;EADiD,CAAlC,CAA1B;EAAA;EAAA,IAAOH,KAAP;EAAA,IAAcY,QAAd;;EAIA,IAAMC,KAAK,GAAG,yBAAY,YAAK;IAC7BD,QAAQ,CAAC;MAAEV,IAAI,EAAE;IAAR,CAAD,CAAR;EACD,CAFa,EAEX,CAACU,QAAD,CAFW,CAAd;EAIA,IAAME,MAAM,GAAG;IAAA,uEACb;MAAA;MAAA;QAAA;UAAA;YAAA;cAASC,IAAT,SAASA,IAAT,EAAeC,SAAf,SAAeA,SAAf,EAA0BC,QAA1B,SAA0BA,QAA1B;;cAAA,MACMR,QAAQ,IAAIC,MAAZ,IAAsBK,IAD5B;gBAAA;gBAAA;cAAA;;cAAA;cAGMH,QAAQ,CAAC;gBAAEV,IAAI,EAAE;cAAR,CAAD,CAAR;cAHN;cAAA,OAI6BO,QAAQ,CAACK,MAAT,CAAgBJ,MAAhB,EAAwBK,IAAxB,EAA8BC,SAA9B,CAJ7B;;YAAA;cAIYE,QAJZ;cAKMN,QAAQ,CAAC;gBAAEV,IAAI,EAAE,qBAAR;gBAA+BE,IAAI,EAAEc;cAArC,CAAD,CAAR,CALN,CAMM;;cACAP,cAAc,CAAC;gBACbQ,MAAM,EAAED,QAAQ,CAACE,IADJ;gBAEbC,eAAe,EAAEH,QAAQ,CAACb,gBAFb;gBAGbY,QAAQ,EAARA;cAHa,CAAD,CAAd;cAPN;cAAA;;YAAA;cAAA;cAAA;cAaYK,OAbZ,GAasB,uBAAeC,KAAf,GAAuB,YAAID,OAA3B,GAAqCE,MAAM,aAbjE;cAcMZ,QAAQ,CAAC;gBAAEV,IAAI,EAAE,kBAAR;gBAA4BI,KAAK,EAAEgB;cAAnC,CAAD,CAAR;;YAdN;cAAA,iCAiBSf,SAjBT;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CADa;;IAAA;MAAA;IAAA;EAAA,KAoBb,CAACE,QAAD,EAAWC,MAAX,EAAmBC,cAAnB,CApBa,CAAf;EAuBA,OAAO;IAAEP,IAAI,EAAEJ,KAAK,CAACI,IAAd;IAAoBD,OAAO,EAAEH,KAAK,CAACG,OAAnC;IAA4CG,KAAK,EAAEN,KAAK,CAACM,KAAzD;IAAgEO,KAAK,EAALA,KAAhE;IAAuEC,MAAM,EAANA;EAAvE,CAAP;AACD;;AArCDW","names":["starknetInvokeReducer","state","action","type","loading","data","transaction_hash","error","undefined","useStarknetInvoke","contract","method","addTransaction","dispatch","reset","invoke","args","overrides","metadata","response","status","code","transactionHash","message","Error","String","exports"],"sources":["../../src/hooks/invoke.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}